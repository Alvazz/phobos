/**
This file is autogenerated.
Do not modify this file directly as changes may be overwritten.

Generated with the following fields:
{% for f in field -%}
{{ f }}
{% endfor -%}
*/

{%- macro rx_commands() %}
{%- for f in field -%}
    {%- if f.configurable and f.tag < 16 %}
        {{ f.pbtype }} set_{{ f.name }} = {{ f.tag }};
    {%- endif -%}
{%- endfor %}

        /**
        These parameters can only be configured when the system is stopped.
        These parameters are not independent and no verification of the
        entire model validity is performed. Changing any of these parameters
        require a recalculation of the state space or moore parameters.

        While setting v does require a state space recalculation, this is an
        allowed exception as we expect the velocity to change over the course
        of a simulation.

        These are numbered starting from 16 to denote they cannot be changed
        while the simulator is running.
        */

{%- for f in field -%}
    {%- if f.configurable and f.tag >= 16 %}
        {{ f.pbtype }} set_{{ f.name }} = {{ f.tag }};
    {%- endif -%}
{%- endfor %}
{%- endmacro -%}


{%- macro tx_commands_smallgroup() %}
        /**
        This message contains fields copied from pbRxMaster as we want to
        acknowledge a change in configuration.
        */
{%- for f in field %}
        {{ f.pbtype }} set_{{ f.name }} = {{ f.tag }};
{%- endfor %}
{%- endmacro %}


syntax = "proto3";
import "build.proto";
import "pose.proto";
import "simulation.proto";

message pbEmpty { }

message pbFeedbackGains {
    float k_p = 1;
    float k_i = 2;
    float k_d = 3;
}

message pbRxMaster {
    oneof value {
        pbEmpty start = 1;
        pbEmpty stop = 2;
{{ rx_commands() }}
    }
}

message pbSmallMessageGroup {
    /**
    These values are reserved to allow us to copy a pbSmallMessageGroup
    object directly into a pbTxMaster object using memcpy.
    */
    reserved 1, 2;

    oneof value {
{{- tx_commands_smallgroup() }}
    }
}

message pbTxMaster {
    uint32 timestamp = 1;

    oneof value {
        pbSimulation simulation_data = 2;
{{- tx_commands_smallgroup() }}
    }
}
